# ì„¹ì…˜2. ìŠ¤í”„ë§ ì›¹ê°œë°œ ê¸°ì´ˆ

ìŠ¤í”„ë§ì—ì„œ ì›¹ê°œë°œí•˜ëŠ” ì„¸ ê°€ì§€ ë°©ë²•: ì •ì  ì»¨í…ì¸ , MVCì™€ í…œí”Œë¦¿ ì—”ì§„, API

# 1. ì •ì  ì»¨í…ì¸ 

ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ ì •ì  ì»¨í…ì¸  ê¸°ëŠ¥ ê¸°ë³¸ìœ¼ë¡œ ì œê³µ

`/resources/static/hello-static.html` íŒŒì¼ â†’ `localhost:8080/hello-static.html` ì ‘ì† ì‹œ ì œê³µ

## ë™ì‘ êµ¬ì¡°(ê°„ë‹¨íˆ)

1. ì»¨íŠ¸ë¡¤ëŸ¬ **ìš°ì„  í™•ì¸**
2. resources: static/ í™•ì¸

![ì •ì  ì»¨í…ì¸  ë™ì‘ êµ¬ì¡°ë¥¼ ì„¤ëª…í•˜ëŠ” ì´ë¯¸ì§€](resources/static%20page.png)

# 2. MVCì™€ í…œí”Œë¦¿ ì—”ì§„

MVC(Model, View, Controller)

```
ğŸ’¡ ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬
```

| ìš”ì†Œ | ì—­í•  | ì¥ê³ ì˜ ê·¸ê²ƒ |
| --- | --- | --- |
| View | í™”ë©´ ê·¸ë¦¬ëŠ” ê²ƒ | Template |
| Controller | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë‚´ë¶€ì ì¸ ê²ƒ | View |
| Model | í™”ë©´ ê·¸ë¦¬ëŠ”ë° í•„ìš”í•œ ë‚´ìš©ì„ ë‹´ì€ ê²ƒ | context (??) |

staticê³¼ ì°¨ì´: ë‚  ê²ƒì˜ HTMLì´ ì•„ë‹Œ ë³€í™˜ëœ HTMLì„ ë°˜í™˜

## ì˜ˆì‹œ

`HelloController.java`

```java
@GetMapping("hello-mvc")
public String helloMvc(@RequestParam("name") String name, Model model) { 
    //                                ^
    model.addAttribute("name", name);
    return "hello-template";
}
```

nameì´ë¼ëŠ” query parameterë¥¼ ë°›ë„ë¡ ì„¤ì •

^

## ë™ì‘ êµ¬ì¡°

![MVCì™€ í…œí”Œë¦¿ ì—”ì§„ ë™ì‘ êµ¬ì¡°ë¥¼ ì„¤ëª…í•˜ëŠ” ì´ë¯¸ì§€](resources/mvc%20template%20engine.png)

### `viewResolver`

: í…œí”Œë¦¿ì„ ì°¾ê³  í…œí”Œë¦¿ ì—”ì§„ì„ ì—°ê²°

ì´ëŸ° `viewResolver`ê°€ ë¦¬í„´ê°’ â€œhello-templateâ€ê³¼ ëª¨ë¸ì„ ì´ìš©í•´ ë³€í™˜ëœ HTMLì„ ë°˜í™˜


# 3. API ë°©ì‹

## `@ResponseBody`

: HTTP Bodyì— ì´ ë©”ì†Œë“œì˜ ë¦¬í„´ê°’ì„ ì“°ê² ë‹¤

ì—†ì„ ë•Œì™€ì˜ ì°¨ì´: ë©”ì†Œë“œì— Modelë„ ì—†ê³  Viewë„ ì—†ë‹¤

### ë™ì‘

ë¬¸ìì—´ì„ ì£¼ë©´ ê·¸ëŒ€ë¡œ HTTP Bodyì— ë„£ì–´ì„œ ì‘ë‹µí•˜ì§€ë§Œ ìë°” ê°ì²´ë¥¼ ì£¼ë©´ (ê¸°ë³¸ê°’) JSONìœ¼ë¡œ ë³€í™˜í•´ ì‘ë‹µí•œë‹¤. 

ì¥ê³ ëŠ” HttpResponseì™€ JsonResponseê°€ ë¶„ë¦¬ë˜ì–´ ìˆë˜ ê²ƒê³¼ ë‹¤ë¥´ë‹¤. DRFì˜ Responseì™€ ì¢€ ë” ë‹®ì•˜ë‹¤. í•˜ì§€ë§Œ DRFì˜ Responseì—ëŠ” serializeëœ ë°ì´í„°ë¥¼ ì¸ìë¡œ ì¤˜ì•¼í–ˆì§€ë§Œ HttpMessageConverterëŠ” ì´ë§ˆì €ë„ ìš”êµ¬í•˜ì§€ ì•ŠëŠ”ë‹¤. 

### ì˜ˆì‹œ

```java
@GetMapping("hello-string")
@ResponseBody
public String helloString(@RequestParam("name") String name) { // modelì´ ì—†ë‹¤
  return "hello " + name; // template ì´ë¦„ì´ ì•„ë‹ˆë‹¤. ì‘ë‹µí•  string ê·¸ ìì²´ë‹¤
}
```

```java
@GetMapping("hello-api")
@ResponseBody
public Hello helloApi(@RequestParam("name") String name) {
    Hello hello = new Hello();
    hello.setName(name);
    return hello; // ìë°” ê°ì²´ë¥¼ ë¦¬í„´í–ˆë‹¤
}

static class Hello {
    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}
```

## ë™ì‘ êµ¬ì¡°

`@ResponseBody` ë•Œë¬¸ì— `viewResolver` ëŒ€ì‹  `HttpMessageConverter`ê°€ ë™ì‘

ë¦¬í„´ê°’ì´ ë¬¸ìì—´ì´ë©´ `StringConverter`ê°€ ë™ì‘ (ê¸°ë³¸ê°’: `StringHttpMessageConverter`)

ë¦¬í„´ê°’ì´ ê°ì²´ë©´ `JsonConverter`ê°€ ë™ì‘ (ê¸°ë³¸ê°’: `MappingJackson2HttpMessageConverter`)

![API ë™ì‘ êµ¬ì¡°ë¥¼ ì„¤ëª…í•˜ëŠ” ì´ë¯¸ì§€](resources/api.png)

## `HttpMessageConverter`

byte ì²˜ë¦¬ ë“± ì—¬ëŸ¬ ê²½ìš°ì— ëŒ€í•œ `HttpMessageConverter`ê°€ ê¸°ë³¸ìœ¼ë¡œ ë“±ë¡ë˜ì–´ ìˆìŒ

í´ë¼ì´ì–¸íŠ¸ì˜ HTTP Accept í—¤ë”ì™€ ì„œë²„ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ ë°˜í™˜ íƒ€ì… ì •ë³´, ì´ë ‡ê²Œ ë‘˜ì„ ì¡°í•©í•´ì„œ `HttpMessageConverter`ì˜ ì¢…ë¥˜ê°€ ê²°ì •ë¨